{"remainingRequest":"/Users/mac/Desktop/我的文件/ssypzmd/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/mac/Desktop/我的文件/ssypzmd/src/views/Info.vue?vue&type=style&index=0&id=abb9de30&scoped=true&lang=css&","dependencies":[{"path":"/Users/mac/Desktop/我的文件/ssypzmd/src/views/Info.vue","mtime":1585812568986},{"path":"/Users/mac/Desktop/我的文件/ssypzmd/node_modules/css-loader/index.js","mtime":499162500000},{"path":"/Users/mac/Desktop/我的文件/ssypzmd/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":499162500000},{"path":"/Users/mac/Desktop/我的文件/ssypzmd/node_modules/postcss-loader/src/index.js","mtime":499162500000},{"path":"/Users/mac/Desktop/我的文件/ssypzmd/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/mac/Desktop/我的文件/ssypzmd/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n.title {\n  height: 60px;\n  line-height: 60px;\n  background: #fff;\n  font-size: 20px;\n  text-indent: 20px;\n}\n.ivu-form .ivu-form-item-label {\n  text-align: justify !important;\n}\n.iconlabelUrl {\n  width: 240px;\n  height: 120px;\n}\n",{"version":3,"sources":["Info.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAiNA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Info.vue","sourceRoot":"src/views","sourcesContent":["<template>\n  <div>\n    <div class=\"navigation\">\n      <p>\n        <span>管理首页&nbsp;>&nbsp;应用&nbsp;>&nbsp;抢单侠>&nbsp;信贷管理>&nbsp;{{title}}</span>\n      </p>\n    </div>\n    <div class=\"clearfix contentcss sales-statis\">\n      <Form ref=\"formValidate\" :model=\"formValidate\" :rules=\"ruleValidate\" :label-width=\"80\">\n        <FormItem label=\"模板名称:\" prop=\"templatename\">\n          <Input v-model=\"formValidate.templatename\" placeholder=\"请输入模板名称\" style=\"width:240px\"></Input>\n        </FormItem>\n        <FormItem label=\"模板类别:\" prop=\"templatetype\">\n          <Select v-model=\"formValidate.templatetype\" placeholder=\"请选择模板类别\" style=\"width:240px;\">\n            <Option\n              v-for=\"item in templateList\"\n              :value=\"item.templateCode\"\n              :key=\"item.templateCode\"\n            >{{ item.templateName }}</Option>\n          </Select>\n        </FormItem>\n\n        <FormItem label=\"开放范围:\" prop=\"openrange\">\n          <Select v-model=\"formValidate.openrange\" placeholder=\"请选择开放范围\" style=\"width:240px;\">\n            <Option\n              v-for=\"item in openrangeList\"\n              :value=\"item.openrangeCode\"\n              :key=\"item.openrangeCode\"\n            >{{ item.openrangeName }}</Option>\n          </Select>\n        </FormItem>\n        <FormItem label=\"上传图片:\" prop=\"productlogo\">\n          <Upload\n            action\n            :before-upload=\"handleUploadicon\"\n            :show-upload-list=\"false\"\n            :format=\"['jpg','jpeg','png', 'gif']\"\n            :on-format-error=\"handleFormatError1\"\n          >\n            <img class=\"iconlabelUrl\" :src=\"formValidate.labelUrl\" alt />\n            <Input\n              v-model=\"formValidate.productlogo\"\n              disabled\n              style=\"width: 120px;margin-top:24px\"\n              class=\"left ml5 hidden\"\n            ></Input>\n            <!-- <Button type=\"ghost\" icon=\"ios-cloud-upload-outline\">上传文件</Button> -->\n          </Upload>\n        </FormItem>\n        <FormItem>\n          <Button type=\"primary\" @click=\"handleSubmit('formValidate')\" style=\"width:100px\">保存</Button>\n          <Button @click=\"handleReset('formValidate')\" style=\"margin-left: 8px;width:100px\">返回</Button>\n        </FormItem>\n      </Form>\n    </div>\n  </div>\n</template>\n<script>\nimport axios from \"axios\";\n\nexport default {\n  data() {\n    return {\n      title: \"\",\n      openrangeList: [\n        { openrangeCode: \"1\", openrangeName: \"全部用户\" },\n        { openrangeCode: \"2\", openrangeName: \"会员用户\" }\n      ],\n      templateList: [\n        { templateCode: \"1\", templateName: \"海报\" },\n        { templateCode: \"2\", templateName: \"名片\" }\n      ],\n      formValidate: {\n        productlogo: \"\",\n        templatename: \"\",\n        templatetype: \"1\",\n        openrange: \"1\",\n        labelUrl: require(\"../assets/logo.jpg\")\n      },\n      ruleValidate: {\n        templatename: [\n          { required: true, message: \"请输入模板名称\", trigger: \"change\" }\n        ],\n        productlogo: [\n          { required: true, message: \"请上传图片\", trigger: \"blur\" }\n        ]\n      }\n    };\n  },\n  methods: {\n    handleUploadicon(file) {\n      let splic = file.name.split(\".\");\n      if (\n        splic[splic.length - 1] == \"png\" ||\n        splic[splic.length - 1] == \"jpg\" ||\n        splic[splic.length - 1] == \"gif\" ||\n        splic[splic.length - 1] == \"jpeg\"\n      ) {\n        let formData = new FormData();\n        formData.append(\"file\", file);\n        let config = {\n          headers: {\n            \"Content-Type\": \"multipart/form-data\"\n          }\n        };\n        axios\n          .post(BASE_URL + \"/fileUpload\", formData, config)\n          .then(resp => {\n            if (resp.code == \"success\") {\n              this.formValidate.labelUrl = resp.data;\n              this.formValidate.productlogo = resp.data;\n            } else {\n            }\n          })\n          .catch(() => {});\n        return false;\n      }\n    },\n    handleFormatError1(file) {\n      this.$Message.info(\"图片格式不正确,请上传正确的图片格式\");\n    },\n    handleSubmit(name) {\n      this.$refs[name].validate(valid => {\n        if (valid) {\n          if ((this.title = \"添加模板\")) {\n            this.$Modal.confirm({\n              title: \"温馨提示\",\n              content: \"<p>确认添加该模板？</p>\",\n              onOk: () => {\n                let data = {\n                  exhibitionName: this.formValidate.templatename,\n                  exhibitionType: this.formValidate.templatetype,\n                  openType: this.formValidate.openrange,\n                  exhibitionPath: this.formValidate.productlogo\n                };\n                this.http\n                  .post(BASE_URL + \"后台保存接口\", data)\n                  .then(data => {\n                    if (data.code == \"success\") {\n                      this.$Message.success(\"添加成功\");\n                      this.$router.push(\"/exhibition\");\n                    } else {\n                      this.$Message.error(\"添加失败\");\n                    }\n                  })\n                  .catch(err => {\n                    console.log(err);\n                  });\n              },\n              onCancel: () => {}\n            });\n          } else {\n            this.$Modal.confirm({\n              title: \"温馨提示\",\n              content: \"<p>确认修改该模板？</p>\",\n              onOk: () => {\n                let data = {\n                  exhibitionName: this.formValidate.templatename,\n                  exhibitionType: this.formValidate.templatetype,\n                  openType: this.formValidate.openrange,\n                  exhibitionPath: this.formValidate.productlogo\n                };\n                this.http\n                  .post(BASE_URL + \"后台修改接口\", data)\n                  .then(data => {\n                    if (data.data == \"success\") {\n                      this.$Message.success(\"修改成功\");\n                      this.$router.push(\"/exhibition\");\n                    } else {\n                      this.$Message.error(\"修改失败\");\n                    }\n                  })\n                  .catch(err => {\n                    console.log(err);\n                  });\n              },\n              onCancel: () => {}\n            });\n          }\n        }\n      });\n    },\n    handleReset(name) {\n      this.$refs[name].resetFields();\n      this.$router.push(\"/exhibition\");\n    }\n  },\n  mounted() {\n    if (this.$route.query.id) {\n      this.title = \"添加模板\";\n    } else {\n      this.title = \"编辑模板\";\n      let data = {\n        exhibitionCode: this.$route.query.exhibitionCode\n      };\n      axios.post(BASE_URL + \"/loan/exhibition/getByCode\", data).then(data => {\n        if (data.code == \"success\") {\n          (this.formValidate.templatename = data.data.exhibitionName),\n            (this.formValidate.templatetype = data.data.exhibitionType),\n            (this.formValidate.openrange = data.data.openType),\n            (this.formValidate.labelUrl = data.data.exhibitionPath),\n            (this.formValidate.productlogo = data.data.exhibitionPath);\n        }\n      });\n    }\n  }\n};\n</script>\n<style scoped>\n.title {\n  height: 60px;\n  line-height: 60px;\n  background: #fff;\n  font-size: 20px;\n  text-indent: 20px;\n}\n.ivu-form .ivu-form-item-label {\n  text-align: justify !important;\n}\n.iconlabelUrl {\n  width: 240px;\n  height: 120px;\n}\n</style>"]}]}